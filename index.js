var x$;x$=angular.module("twstat",[]),x$.controller("twstatList",["$scope","$http"].concat(function(t,e){var i;return t.blah=123,e({url:"csv/county/index/index.json",method:"GET"}).success(function(e){return t.csvs=e.map(function(t){return{name:t.replace(/\.csv$/,"")}})}),t.limitscroll=function(t){var e;return e=function(t){return t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,!1},t.addEventListener("mousewheel",function(t){var i,n,o,s,r,l,c;return i=this.getBoundingClientRect(),n=i.height,o={height:this.scrollHeight,top:this.scrollTop},o.height<=n?void 0:(s=t.deltaY,r=!1,l=!1,!t.target||"field-agent"!==t.target.id&&"field-agent"!==t.target.parentNode.id||(c=[!0,!0],l=c[0],r=c[1]),l?$(this).scrollTop(o.top+t.deltaY):-t.deltaY>o.top?($(this).scrollTop(0),r=!0):t.deltaY>0&&o.height-n-o.top<=0&&(r=!0),r?e(t):void 0)})},t.items=document.getElementById("items"),t.limitscroll(t.items),i=t.items.getBoundingClientRect(),$(t.items).css({height:window.innerHeight-i.top-40+"px"}),t.vizs=document.getElementById("vizs"),t.limitscroll(t.vizs),i=t.vizs.getBoundingClientRect(),$(t.vizs).css({height:window.innerHeight-i.top-40+"px"}),t.update=function(e){return d3.csv("csv/county/index/"+e.name+".csv",function(i){return t.$apply(function(){var t,n,o,s,r;return e.data=i,e.svg=d3.select("#vizs").append("svg"),e.svg.attr({width:"100%",height:"200px"}),t=e.svg[0][0].getBoundingClientRect(),n={width:t.width,height:t.height},o=n.width,s=n.height,e.svg.attr({viewBox:"0 0 "+o+" "+s}),r=d3.svg.line(),console.log(i)})})},t.toggle=function(e){return e.active=!e.active,e.data?void 0:t.update(e)}}));